{"version":3,"sources":["../../../src/hooks/index.ts"],"sourcesContent":["/**\n * Legacy Hook System - Migration Notice\n * \n * This hook system has been consolidated with the more advanced agentic-flow-hooks system.\n * All functionality is now available through the modern implementation at:\n * src/services/agentic-flow-hooks/\n * \n * This file provides backward compatibility redirects while we complete the migration.\n */\n\n// Re-export the modern agentic-flow-hooks system\nexport {\n  agenticHookManager,\n  initializeAgenticFlowHooks,\n} from '../services/agentic-flow-hooks/index.js';\n\n// Re-export verification system\nexport {\n  verificationHookManager,\n  initializeVerificationSystem,\n  getVerificationSystemStatus,\n  shutdownVerificationSystem,\n} from '../verification/index.js';\n\n// Re-export modern types with compatibility aliases\nexport type {\n  AgenticHookContext as HookExecutionContext,\n  HookRegistration as AgentHook,\n  HookPayload as EventPayload,\n  AgenticHookType as HookTrigger,\n  HookHandlerResult as HookExecutionResult,\n} from '../services/agentic-flow-hooks/types.js';\n\n// Legacy hook templates for backward compatibility\nexport const QUALITY_HOOKS = {\n  CODE_QUALITY: {\n    name: 'Code Quality Monitor',\n    description: 'Automatically runs code quality checks on file changes',\n    type: 'workflow-step' as const,\n    priority: 8,\n    enabled: true\n  },\n  SECURITY_SCAN: {\n    name: 'Security Scanner', \n    description: 'Scans for security vulnerabilities and credential leaks',\n    type: 'workflow-step' as const,\n    priority: 9,\n    enabled: true\n  },\n  DOCUMENTATION_SYNC: {\n    name: 'Documentation Sync',\n    description: 'Automatically updates documentation when specifications change',\n    type: 'workflow-step' as const,\n    priority: 7,\n    enabled: true\n  },\n  PERFORMANCE_MONITOR: {\n    name: 'Performance Monitor',\n    description: 'Analyzes performance impact of code changes', \n    type: 'workflow-step' as const,\n    priority: 6,\n    enabled: true\n  }\n};\n\n// Legacy constants for backward compatibility\nexport const DEFAULT_HOOK_CONFIG = {\n  maxConcurrentHooks: 10,\n  defaultThrottleMs: 1000,\n  defaultDebounceMs: 500,\n  eventQueueSize: 1000,\n  agentPoolSize: 50,\n  enableMetrics: true,\n  enablePersistence: true,\n  logLevel: 'info' as const,\n  watchPatterns: ['**/*.md', '**/*.ts', '**/*.js', '**/*.json'],\n  ignorePatterns: ['node_modules/**', '.git/**', 'dist/**', 'build/**']\n};\n\nexport const HOOK_TRIGGERS = {\n  FILE_SAVE: 'workflow-step',\n  FILE_CHANGE: 'workflow-step',\n  FILE_CREATE: 'workflow-start',\n  FILE_DELETE: 'workflow-complete',\n  TASK_COMPLETE: 'workflow-complete',\n  TASK_FAIL: 'workflow-error',\n  SPEC_UPDATE: 'workflow-step',\n  CODE_CHANGE: 'workflow-step',\n  AGENT_SPAWN: 'workflow-start',\n  WORKFLOW_PHASE: 'workflow-step',\n  TIME_INTERVAL: 'performance-metric'\n} as const;\n\nexport const AGENT_TYPES = {\n  QUALITY_ASSURANCE: 'quality_assurance',\n  SECURITY_SCAN: 'security_scan', \n  DOCUMENTATION_SYNC: 'documentation_sync',\n  PERFORMANCE_ANALYSIS: 'performance_analysis'\n} as const;\n\n/**\n * Migration utility class\n * Provides backward compatibility while encouraging migration to agentic-flow-hooks\n */\nexport class HookUtils {\n  /**\n   * @deprecated Use agenticHookManager.register() instead\n   */\n  static createFilePatternCondition(pattern: string) {\n    console.warn('HookUtils.createFilePatternCondition is deprecated. Use agenticHookManager.register() with proper HookFilter instead.');\n    return { type: 'file_pattern', pattern };\n  }\n\n  /**\n   * @deprecated Use agenticHookManager.register() instead\n   */\n  static createSpawnAgentAction(agentType: string, config: Record<string, any>) {\n    console.warn('HookUtils.createSpawnAgentAction is deprecated. Use agenticHookManager.register() with proper hook handlers instead.');\n    return { type: 'spawn_agent', agentType, agentConfig: config };\n  }\n\n  /**\n   * @deprecated Use agenticHookManager.register() instead\n   */\n  static createQualityHook(options: any) {\n    console.warn('HookUtils.createQualityHook is deprecated. Use agenticHookManager.register() with workflow-step hooks instead.');\n    return QUALITY_HOOKS.CODE_QUALITY;\n  }\n\n  /**\n   * @deprecated Use agenticHookManager.register() instead  \n   */\n  static createSecurityHook(options: any) {\n    console.warn('HookUtils.createSecurityHook is deprecated. Use agenticHookManager.register() with workflow-step hooks instead.');\n    return QUALITY_HOOKS.SECURITY_SCAN;\n  }\n\n  /**\n   * @deprecated Use agenticHookManager.register() instead\n   */\n  static createDocumentationHook(options: any) {\n    console.warn('HookUtils.createDocumentationHook is deprecated. Use agenticHookManager.register() with workflow-step hooks instead.');\n    return QUALITY_HOOKS.DOCUMENTATION_SYNC;\n  }\n\n  /**\n   * @deprecated Use agenticHookManager.register() instead\n   */\n  static createPerformanceHook(options: any) {\n    console.warn('HookUtils.createPerformanceHook is deprecated. Use agenticHookManager.register() with performance-metric hooks instead.');\n    return QUALITY_HOOKS.PERFORMANCE_MONITOR;\n  }\n}\n\n/**\n * @deprecated Use initializeAgenticFlowHooks() instead\n */\nexport function createHookEngine(config?: any) {\n  console.warn('createHookEngine is deprecated. Use initializeAgenticFlowHooks() and agenticHookManager instead.');\n  return {\n    registerHook: () => console.warn('Use agenticHookManager.register() instead'),\n    start: () => console.warn('Hooks are automatically initialized with agenticHookManager'),\n    stop: () => console.warn('Use agenticHookManager shutdown methods instead')\n  };\n}\n\n/**\n * @deprecated Use agenticHookManager.register() for individual hooks instead\n */\nexport async function setupDefaultHooks(engine?: any) {\n  console.warn('setupDefaultHooks is deprecated. Use agenticHookManager.register() to register specific hooks instead.');\n  console.info('Consider migrating to agentic-flow-hooks for advanced pipeline management and neural integration.');\n  \n  // Initialize verification system as part of default setup\n  try {\n    const { initializeVerificationSystem } = await import('../verification/index.js');\n    await initializeVerificationSystem();\n    console.info('âœ… Verification system initialized with default hooks');\n    return 9; // 4 legacy + 5 verification hooks\n  } catch (error) {\n    console.warn('Failed to initialize verification system:', error);\n    return 4; // Return legacy count for backward compatibility\n  }\n}\n\n// Migration notice for users\nconsole.info(`\nðŸ”„ MIGRATION NOTICE: Hook System Consolidation\n\nThe legacy hook system in src/hooks/ has been consolidated with the advanced\nagentic-flow-hooks system for better performance and functionality.\n\nâœ… New System Features:\n  - Advanced pipeline management\n  - Neural pattern learning  \n  - Performance optimization\n  - Memory coordination hooks\n  - LLM integration hooks\n  - Comprehensive verification system\n\nðŸ†• Verification System:\n  - Pre-task verification hooks\n  - Post-task validation hooks\n  - Integration test hooks\n  - Truth telemetry hooks\n  - Rollback trigger hooks\n\nðŸ“– Migration Guide:\n  - Replace AgentHookEngine with agenticHookManager\n  - Update hook registrations to use modern HookRegistration interface\n  - Leverage new hook types: LLM, memory, neural, performance, workflow\n  - Use verification hooks for quality assurance\n  - See docs/maestro/specs/hooks-refactoring-plan.md for details\n\nðŸš€ Get Started:\n  import { agenticHookManager, initializeAgenticFlowHooks } from '../services/agentic-flow-hooks/'\n  import { verificationHookManager, initializeVerificationSystem } from '../verification/'\n  await initializeAgenticFlowHooks()\n  await initializeVerificationSystem()\n  agenticHookManager.register({ ... })\n`);"],"names":["agenticHookManager","initializeAgenticFlowHooks","verificationHookManager","initializeVerificationSystem","getVerificationSystemStatus","shutdownVerificationSystem","QUALITY_HOOKS","CODE_QUALITY","name","description","type","priority","enabled","SECURITY_SCAN","DOCUMENTATION_SYNC","PERFORMANCE_MONITOR","DEFAULT_HOOK_CONFIG","maxConcurrentHooks","defaultThrottleMs","defaultDebounceMs","eventQueueSize","agentPoolSize","enableMetrics","enablePersistence","logLevel","watchPatterns","ignorePatterns","HOOK_TRIGGERS","FILE_SAVE","FILE_CHANGE","FILE_CREATE","FILE_DELETE","TASK_COMPLETE","TASK_FAIL","SPEC_UPDATE","CODE_CHANGE","AGENT_SPAWN","WORKFLOW_PHASE","TIME_INTERVAL","AGENT_TYPES","QUALITY_ASSURANCE","PERFORMANCE_ANALYSIS","HookUtils","createFilePatternCondition","pattern","console","warn","createSpawnAgentAction","agentType","config","agentConfig","createQualityHook","options","createSecurityHook","createDocumentationHook","createPerformanceHook","createHookEngine","registerHook","start","stop","setupDefaultHooks","engine","info","error"],"mappings":"AAWA,SACEA,kBAAkB,EAClBC,0BAA0B,QACrB,0CAA0C;AAGjD,SACEC,uBAAuB,EACvBC,4BAA4B,EAC5BC,2BAA2B,EAC3BC,0BAA0B,QACrB,2BAA2B;AAYlC,OAAO,MAAMC,gBAAgB;IAC3BC,cAAc;QACZC,MAAM;QACNC,aAAa;QACbC,MAAM;QACNC,UAAU;QACVC,SAAS;IACX;IACAC,eAAe;QACbL,MAAM;QACNC,aAAa;QACbC,MAAM;QACNC,UAAU;QACVC,SAAS;IACX;IACAE,oBAAoB;QAClBN,MAAM;QACNC,aAAa;QACbC,MAAM;QACNC,UAAU;QACVC,SAAS;IACX;IACAG,qBAAqB;QACnBP,MAAM;QACNC,aAAa;QACbC,MAAM;QACNC,UAAU;QACVC,SAAS;IACX;AACF,EAAE;AAGF,OAAO,MAAMI,sBAAsB;IACjCC,oBAAoB;IACpBC,mBAAmB;IACnBC,mBAAmB;IACnBC,gBAAgB;IAChBC,eAAe;IACfC,eAAe;IACfC,mBAAmB;IACnBC,UAAU;IACVC,eAAe;QAAC;QAAW;QAAW;QAAW;KAAY;IAC7DC,gBAAgB;QAAC;QAAmB;QAAW;QAAW;KAAW;AACvE,EAAE;AAEF,OAAO,MAAMC,gBAAgB;IAC3BC,WAAW;IACXC,aAAa;IACbC,aAAa;IACbC,aAAa;IACbC,eAAe;IACfC,WAAW;IACXC,aAAa;IACbC,aAAa;IACbC,aAAa;IACbC,gBAAgB;IAChBC,eAAe;AACjB,EAAW;AAEX,OAAO,MAAMC,cAAc;IACzBC,mBAAmB;IACnB3B,eAAe;IACfC,oBAAoB;IACpB2B,sBAAsB;AACxB,EAAW;AAMX,OAAO,MAAMC;IAIX,OAAOC,2BAA2BC,OAAe,EAAE;QACjDC,QAAQC,IAAI,CAAC;QACb,OAAO;YAAEpC,MAAM;YAAgBkC;QAAQ;IACzC;IAKA,OAAOG,uBAAuBC,SAAiB,EAAEC,MAA2B,EAAE;QAC5EJ,QAAQC,IAAI,CAAC;QACb,OAAO;YAAEpC,MAAM;YAAesC;YAAWE,aAAaD;QAAO;IAC/D;IAKA,OAAOE,kBAAkBC,OAAY,EAAE;QACrCP,QAAQC,IAAI,CAAC;QACb,OAAOxC,cAAcC,YAAY;IACnC;IAKA,OAAO8C,mBAAmBD,OAAY,EAAE;QACtCP,QAAQC,IAAI,CAAC;QACb,OAAOxC,cAAcO,aAAa;IACpC;IAKA,OAAOyC,wBAAwBF,OAAY,EAAE;QAC3CP,QAAQC,IAAI,CAAC;QACb,OAAOxC,cAAcQ,kBAAkB;IACzC;IAKA,OAAOyC,sBAAsBH,OAAY,EAAE;QACzCP,QAAQC,IAAI,CAAC;QACb,OAAOxC,cAAcS,mBAAmB;IAC1C;AACF;AAKA,OAAO,SAASyC,iBAAiBP,MAAY;IAC3CJ,QAAQC,IAAI,CAAC;IACb,OAAO;QACLW,cAAc,IAAMZ,QAAQC,IAAI,CAAC;QACjCY,OAAO,IAAMb,QAAQC,IAAI,CAAC;QAC1Ba,MAAM,IAAMd,QAAQC,IAAI,CAAC;IAC3B;AACF;AAKA,OAAO,eAAec,kBAAkBC,MAAY;IAClDhB,QAAQC,IAAI,CAAC;IACbD,QAAQiB,IAAI,CAAC;IAGb,IAAI;QACF,MAAM,EAAE3D,4BAA4B,EAAE,GAAG,MAAM,MAAM,CAAC;QACtD,MAAMA;QACN0C,QAAQiB,IAAI,CAAC;QACb,OAAO;IACT,EAAE,OAAOC,OAAO;QACdlB,QAAQC,IAAI,CAAC,6CAA6CiB;QAC1D,OAAO;IACT;AACF;AAGAlB,QAAQiB,IAAI,CAAC,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkCd,CAAC"}