{"version":3,"sources":["../../../../src/cli/simple-commands/hooks.js"],"sourcesContent":["import {\n  printSuccess,\n  printError,\n  printWarning,\n  execRuvSwarmHook,\n  checkRuvSwarmAvailable,\n} from '../utils.js';\nimport { SqliteMemoryStore } from '../../memory/sqlite-store.js';\n\n// Initialize memory store\nlet memoryStore = null;\n\nasync function getMemoryStore() {\n  if (!memoryStore) {\n    memoryStore = new SqliteMemoryStore();\n    await memoryStore.initialize();\n  }\n  return memoryStore;\n}\n\n// Simple ID generator\nfunction generateId(prefix = 'id') {\n  return `${prefix}-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n}\n\nexport async function hooksAction(subArgs, flags) {\n  const subcommand = subArgs[0];\n  const options = flags;\n\n  if (options.help || options.h || !subcommand) {\n    showHooksHelp();\n    return;\n  }\n\n  try {\n    switch (subcommand) {\n      // Pre-Operation Hooks\n      case 'pre-task':\n        await preTaskCommand(subArgs, flags);\n        break;\n      case 'pre-edit':\n        await preEditCommand(subArgs, flags);\n        break;\n      case 'pre-bash':\n      case 'pre-command': // Support both names for compatibility\n        await preBashCommand(subArgs, flags);\n        break;\n\n      // Post-Operation Hooks\n      case 'post-task':\n        await postTaskCommand(subArgs, flags);\n        break;\n      case 'post-edit':\n        await postEditCommand(subArgs, flags);\n        break;\n      case 'post-bash':\n      case 'post-command': // Support both names for compatibility\n        await postBashCommand(subArgs, flags);\n        break;\n      case 'post-search':\n        await postSearchCommand(subArgs, flags);\n        break;\n\n      // MCP Integration Hooks\n      case 'mcp-initialized':\n        await mcpInitializedCommand(subArgs, flags);\n        break;\n      case 'agent-spawned':\n        await agentSpawnedCommand(subArgs, flags);\n        break;\n      case 'task-orchestrated':\n        await taskOrchestratedCommand(subArgs, flags);\n        break;\n      case 'neural-trained':\n        await neuralTrainedCommand(subArgs, flags);\n        break;\n\n      // Session Hooks\n      case 'session-end':\n        await sessionEndCommand(subArgs, flags);\n        break;\n      case 'session-restore':\n        await sessionRestoreCommand(subArgs, flags);\n        break;\n      case 'notify':\n        await notifyCommand(subArgs, flags);\n        break;\n\n      // NEW: PreToolUse Modification Hooks (v2.0.10+)\n      case 'modify-bash':\n        await modifyBashCommand(subArgs, flags);\n        break;\n      case 'modify-file':\n        await modifyFileCommand(subArgs, flags);\n        break;\n      case 'modify-git-commit':\n        await modifyGitCommitCommand(subArgs, flags);\n        break;\n\n      default:\n        printError(`Unknown hooks command: ${subcommand}`);\n        showHooksHelp();\n    }\n  } catch (err) {\n    printError(`Hooks command failed: ${err.message}`);\n  }\n}\n\n// ===== PRE-OPERATION HOOKS =====\n\nasync function preTaskCommand(subArgs, flags) {\n  const options = flags;\n  const description = options.description || 'Unnamed task';\n  const taskId = options['task-id'] || options.taskId || generateId('task');\n  const agentId = options['agent-id'] || options.agentId;\n  const autoSpawnAgents = options['auto-spawn-agents'] !== 'false';\n\n  console.log(`ðŸ”„ Executing pre-task hook...`);\n  console.log(`ðŸ“‹ Task: ${description}`);\n  console.log(`ðŸ†” Task ID: ${taskId}`);\n  if (agentId) console.log(`ðŸ¤– Agent: ${agentId}`);\n\n  try {\n    const store = await getMemoryStore();\n    const taskData = {\n      taskId,\n      description,\n      agentId,\n      autoSpawnAgents,\n      status: 'started',\n      startedAt: new Date().toISOString(),\n    };\n\n    await store.store(`task:${taskId}`, taskData, {\n      namespace: 'hooks:pre-task',\n      metadata: { hookType: 'pre-task', agentId },\n    });\n\n    await store.store(\n      `task-index:${Date.now()}`,\n      {\n        taskId,\n        description,\n        timestamp: new Date().toISOString(),\n      },\n      { namespace: 'task-index' },\n    );\n\n    console.log(`  ðŸ’¾ Saved to .swarm/memory.db`);\n\n    // Execute ruv-swarm hook if available (with timeout for npx scenarios)\n    try {\n      const checkPromise = checkRuvSwarmAvailable();\n      const timeoutPromise = new Promise((_, reject) => \n        setTimeout(() => reject(new Error('Timeout')), 3000)\n      );\n      \n      const isAvailable = await Promise.race([checkPromise, timeoutPromise]);\n      \n      if (isAvailable) {\n        console.log(`\\nðŸ”„ Executing ruv-swarm pre-task hook...`);\n        const hookResult = await execRuvSwarmHook('pre-task', {\n          description,\n          'task-id': taskId,\n          'auto-spawn-agents': autoSpawnAgents,\n          ...(agentId ? { 'agent-id': agentId } : {}),\n        });\n\n        if (hookResult.success) {\n          await store.store(\n            `task:${taskId}:ruv-output`,\n            {\n              output: hookResult.output,\n              timestamp: new Date().toISOString(),\n            },\n            { namespace: 'hooks:ruv-swarm' },\n          );\n\n          printSuccess(`âœ… Pre-task hook completed successfully`);\n        }\n      }\n    } catch (err) {\n      // Skip ruv-swarm hook if it times out or fails\n      console.log(`\\nâš ï¸  Skipping ruv-swarm hook (${err.message})`);\n    }\n\n    console.log(`\\nðŸŽ¯ TASK PREPARATION COMPLETE`);\n    \n    // Close the memory store to prevent hanging\n    if (memoryStore && memoryStore.close) {\n      memoryStore.close();\n    }\n    \n    // Force exit after a short delay to ensure cleanup\n    setTimeout(() => {\n      process.exit(0);\n    }, 100);\n  } catch (err) {\n    printError(`Pre-task hook failed: ${err.message}`);\n    \n    // Close the memory store on error too\n    if (memoryStore && memoryStore.close) {\n      memoryStore.close();\n    }\n    \n    // Force exit after a short delay to ensure cleanup\n    setTimeout(() => {\n      process.exit(1);\n    }, 100);\n  }\n}\n\nasync function preEditCommand(subArgs, flags) {\n  const options = flags;\n  const file = options.file || 'unknown-file';\n  const operation = options.operation || 'edit';\n  const autoAssignAgents = options['auto-assign-agents'] || false;\n  const loadContext = options['load-context'] || false;\n\n  console.log(`ðŸ“ Executing pre-edit hook...`);\n  console.log(`ðŸ“„ File: ${file}`);\n  console.log(`âš™ï¸  Operation: ${operation}`);\n  if (autoAssignAgents) console.log(`ðŸ¤– Auto-assign agents: ENABLED`);\n  if (loadContext) console.log(`ðŸ”„ Load context: ENABLED`);\n\n  try {\n    const store = await getMemoryStore();\n\n    // Auto-assign agents based on file type\n    let assignedAgentType = 'general';\n    let recommendedAgent = null;\n\n    if (autoAssignAgents) {\n      const path = await import('path');\n      const ext = path.extname(file).toLowerCase();\n\n      const agentMapping = {\n        '.js': 'javascript-developer',\n        '.ts': 'typescript-developer',\n        '.py': 'python-developer',\n        '.go': 'golang-developer',\n        '.rs': 'rust-developer',\n        '.java': 'java-developer',\n        '.cpp': 'cpp-developer',\n        '.c': 'c-developer',\n        '.css': 'frontend-developer',\n        '.html': 'frontend-developer',\n        '.vue': 'frontend-developer',\n        '.react': 'frontend-developer',\n        '.md': 'technical-writer',\n        '.yml': 'devops-engineer',\n        '.yaml': 'devops-engineer',\n        '.json': 'config-specialist',\n        '.sql': 'database-expert',\n        '.sh': 'system-admin',\n        '.dockerfile': 'devops-engineer',\n      };\n\n      assignedAgentType = agentMapping[ext] || 'general-developer';\n      recommendedAgent = {\n        type: assignedAgentType,\n        file: file,\n        extension: ext,\n        recommended: true,\n      };\n\n      console.log(`  ðŸ¤– Recommended agent: ${assignedAgentType}`);\n    }\n\n    // Load context if requested\n    let contextData = null;\n    if (loadContext) {\n      try {\n        // Check if file exists and get basic info\n        const fs = await import('fs');\n        const path = await import('path');\n\n        if (fs.existsSync(file)) {\n          const stats = fs.statSync(file);\n          const dirname = path.dirname(file);\n          const basename = path.basename(file);\n\n          contextData = {\n            fileExists: true,\n            size: stats.size,\n            modified: stats.mtime,\n            directory: dirname,\n            filename: basename,\n            isDirectory: stats.isDirectory(),\n          };\n\n          console.log(`  ðŸ“ Context loaded: ${basename} (${stats.size} bytes)`);\n        } else {\n          contextData = {\n            fileExists: false,\n            willCreate: true,\n            directory: path.dirname(file),\n            filename: path.basename(file),\n          };\n          console.log(`  ðŸ“ Context: New file will be created`);\n        }\n      } catch (err) {\n        console.log(`  âš ï¸  Warning: Could not load context for ${file}`);\n        contextData = { error: err.message };\n      }\n    }\n\n    const editData = {\n      file,\n      operation,\n      timestamp: new Date().toISOString(),\n      editId: generateId('edit'),\n      autoAssignAgents,\n      loadContext,\n      assignedAgentType,\n      recommendedAgent,\n      contextData,\n    };\n\n    await store.store(`edit:${editData.editId}:pre`, editData, {\n      namespace: 'hooks:pre-edit',\n      metadata: { hookType: 'pre-edit', file, agentType: assignedAgentType },\n    });\n\n    // Store agent recommendation if enabled\n    if (autoAssignAgents && recommendedAgent) {\n      await store.store(`agent-recommendation:${file}`, recommendedAgent, {\n        namespace: 'agent-assignments',\n        ttl: 3600, // 1 hour\n      });\n    }\n\n    console.log(`  ðŸ’¾ Pre-edit state saved to .swarm/memory.db`);\n    printSuccess(`âœ… Pre-edit hook completed`);\n  } catch (err) {\n    printError(`Pre-edit hook failed: ${err.message}`);\n  }\n}\n\nasync function preBashCommand(subArgs, flags) {\n  const options = flags;\n  const command = options.command || subArgs.slice(1).join(' ') || '';\n  const workingDir = options.cwd || process.cwd();\n  const validateSafety = options['validate-safety'] === true || options['validate-safety'] === 'true' || options.validate === true || options.validate === 'true' || false;\n  const prepareResources = options['prepare-resources'] === true || options['prepare-resources'] === 'true' || false;\n\n  console.log(`ðŸ”§ Executing pre-bash hook...`);\n  console.log(`ðŸ“œ Command: ${command}`);\n  console.log(`ðŸ“ Working dir: ${workingDir}`);\n  if (validateSafety) console.log(`ðŸ”’ Safety validation: ENABLED`);\n  if (prepareResources) console.log(`ðŸ› ï¸  Resource preparation: ENABLED`);\n\n  try {\n    const store = await getMemoryStore();\n    let safetyResult = 'skipped';\n\n    if (validateSafety) {\n      // Basic safety validation\n      const dangerousCommands = [\n        'rm -rf /',\n        'rm -rf .',\n        'rm -rf *',\n        'format',\n        'fdisk',\n        'mkfs',\n        'curl * | bash',\n        'wget * | sh',\n        'eval',\n        'exec',\n        'chmod 777',\n      ];\n\n      const isDangerous = command && typeof command === 'string' && command.length > 0 \n        ? dangerousCommands.some((dangerous) =>\n            command.toLowerCase().includes(dangerous.toLowerCase()),\n          )\n        : false;\n\n      safetyResult = isDangerous ? 'dangerous' : 'safe';\n\n      if (isDangerous) {\n        console.log(`  âš ï¸  Safety check: DANGEROUS COMMAND DETECTED`);\n        console.log(`  ðŸš« Command blocked for safety`);\n        printError(`Command blocked due to safety validation: ${command}`);\n        return;\n      }\n    }\n\n    if (prepareResources) {\n      // Resource preparation - create working directory if needed\n      const fs = await import('fs');\n      const path = await import('path');\n\n      if (!fs.existsSync(workingDir)) {\n        fs.mkdirSync(workingDir, { recursive: true });\n        console.log(`  ðŸ“ Created working directory: ${workingDir}`);\n      }\n\n      // Check available disk space\n      try {\n        const stats = fs.statSync(workingDir);\n        console.log(`  ðŸ’¾ Working directory prepared`);\n      } catch (err) {\n        console.log(`  âš ï¸  Warning: Could not check working directory`);\n      }\n    }\n\n    const bashData = {\n      command,\n      workingDir,\n      timestamp: new Date().toISOString(),\n      bashId: generateId('bash'),\n      safety: safetyResult,\n      validationEnabled: validateSafety,\n      resourcesPrepped: prepareResources,\n    };\n\n    await store.store(`bash:${bashData.bashId}:pre`, bashData, {\n      namespace: 'hooks:pre-bash',\n      metadata: { hookType: 'pre-bash', command, safety: safetyResult },\n    });\n\n    console.log(`  ðŸ’¾ Command logged to .swarm/memory.db`);\n    console.log(`  ðŸ”’ Safety check: ${safetyResult.toUpperCase()}`);\n    printSuccess(`âœ… Pre-bash hook completed`);\n  } catch (err) {\n    printError(`Pre-bash hook failed: ${err.message}`);\n  }\n}\n\n// ===== POST-OPERATION HOOKS =====\n\nasync function postTaskCommand(subArgs, flags) {\n  const options = flags;\n  const taskId = options['task-id'] || options.taskId || generateId('task');\n  const analyzePerformance = options['analyze-performance'] !== 'false';\n\n  console.log(`ðŸ Executing post-task hook...`);\n  console.log(`ðŸ†” Task ID: ${taskId}`);\n\n  try {\n    const store = await getMemoryStore();\n    const taskData = await store.retrieve(`task:${taskId}`, {\n      namespace: 'hooks:pre-task',\n    });\n\n    const completedData = {\n      ...(taskData || {}),\n      status: 'completed',\n      completedAt: new Date().toISOString(),\n      duration: taskData ? Date.now() - new Date(taskData.startedAt).getTime() : null,\n    };\n\n    await store.store(`task:${taskId}:completed`, completedData, {\n      namespace: 'hooks:post-task',\n      metadata: { hookType: 'post-task' },\n    });\n\n    if (analyzePerformance && completedData.duration) {\n      const metrics = {\n        taskId,\n        duration: completedData.duration,\n        durationHuman: `${(completedData.duration / 1000).toFixed(2)}s`,\n        timestamp: new Date().toISOString(),\n      };\n\n      await store.store(`metrics:${taskId}`, metrics, {\n        namespace: 'performance',\n      });\n      console.log(`  ðŸ“Š Performance: ${metrics.durationHuman}`);\n    }\n\n    console.log(`  ðŸ’¾ Task completion saved to .swarm/memory.db`);\n    printSuccess(`âœ… Post-task hook completed`);\n  } catch (err) {\n    printError(`Post-task hook failed: ${err.message}`);\n  }\n}\n\nasync function postEditCommand(subArgs, flags) {\n  const options = flags;\n  const file = options.file || 'unknown-file';\n  let memoryKey = options['memory-key'] || options.memoryKey;\n  \n  // Handle case where memory-key is passed as a boolean flag without value\n  if (memoryKey === true) {\n    // Generate a default memory key based on the file path and timestamp\n    const path = await import('path');\n    const basename = path.basename(file);\n    memoryKey = `edit:${basename}:${Date.now()}`;\n  }\n  \n  const format = options.format || false;\n  const updateMemory = options['update-memory'] || false;\n  const trainNeural = options['train-neural'] || false;\n\n  console.log(`ðŸ“ Executing post-edit hook...`);\n  console.log(`ðŸ“„ File: ${file}`);\n  if (memoryKey) console.log(`ðŸ’¾ Memory key: ${memoryKey}`);\n  if (format) console.log(`ðŸŽ¨ Auto-format: ENABLED`);\n  if (updateMemory) console.log(`ðŸ§  Memory update: ENABLED`);\n  if (trainNeural) console.log(`ðŸ¤– Neural training: ENABLED`);\n\n  try {\n    const store = await getMemoryStore();\n    const path = await import('path');\n    const fs = await import('fs');\n\n    // Auto-format file if requested\n    let formatResult = null;\n    if (format && fs.existsSync(file)) {\n      const ext = path.extname(file).toLowerCase();\n      const formatters = {\n        '.js': 'prettier',\n        '.ts': 'prettier',\n        '.json': 'prettier',\n        '.css': 'prettier',\n        '.html': 'prettier',\n        '.py': 'black',\n        '.go': 'gofmt',\n        '.rs': 'rustfmt',\n        '.java': 'google-java-format',\n        '.cpp': 'clang-format',\n        '.c': 'clang-format',\n      };\n\n      const formatter = formatters[ext];\n      if (formatter) {\n        console.log(`  ðŸŽ¨ Auto-formatting with ${formatter}...`);\n        formatResult = {\n          formatter,\n          extension: ext,\n          attempted: true,\n          timestamp: new Date().toISOString(),\n        };\n      } else {\n        console.log(`  âš ï¸  No formatter available for ${ext}`);\n        formatResult = {\n          extension: ext,\n          attempted: false,\n          reason: 'No formatter available',\n        };\n      }\n    }\n\n    // Update memory with edit context\n    let memoryUpdate = null;\n    if (updateMemory) {\n      const editContext = {\n        file,\n        editedAt: new Date().toISOString(),\n        editId: generateId('edit'),\n        formatted: formatResult?.attempted || false,\n        fileSize: fs.existsSync(file) ? fs.statSync(file).size : 0,\n        directory: path.dirname(file),\n        basename: path.basename(file),\n      };\n\n      memoryUpdate = editContext;\n\n      // Store in coordination namespace\n      await store.store(`edit-context:${editContext.editId}`, editContext, {\n        namespace: 'coordination',\n        metadata: { type: 'edit-context', file },\n      });\n\n      console.log(`  ðŸ§  Edit context stored in memory`);\n    }\n\n    // Train neural patterns if requested\n    let neuralTraining = null;\n    if (trainNeural) {\n      // Simulate neural training with file patterns\n      const ext = path.extname(file).toLowerCase();\n      const basename = path.basename(file);\n      const editTime = new Date().toISOString();\n\n      const patterns = {\n        fileType: ext,\n        fileName: basename,\n        editTime,\n        confidence: Math.random() * 0.5 + 0.5, // 50-100% confidence\n        patterns: [\n          `${ext}_edit_pattern`,\n          `${basename}_modification`,\n          `edit_${Date.now()}_sequence`,\n        ],\n      };\n\n      neuralTraining = patterns;\n\n      await store.store(`neural-pattern:${generateId('pattern')}`, patterns, {\n        namespace: 'neural-training',\n        metadata: { type: 'edit-pattern', file, extension: ext },\n      });\n\n      console.log(\n        `  ðŸ¤– Neural patterns trained (${(patterns.confidence * 100).toFixed(1)}% confidence)`,\n      );\n    }\n\n    const editData = {\n      file,\n      memoryKey,\n      timestamp: new Date().toISOString(),\n      editId: generateId('edit'),\n      format,\n      updateMemory,\n      trainNeural,\n      formatResult,\n      memoryUpdate,\n      neuralTraining,\n    };\n\n    await store.store(`edit:${editData.editId}:post`, editData, {\n      namespace: 'hooks:post-edit',\n      metadata: { hookType: 'post-edit', file, formatted: formatResult?.attempted || false },\n    });\n\n    if (memoryKey && typeof memoryKey === 'string') {\n      await store.store(\n        memoryKey,\n        {\n          file,\n          editedAt: new Date().toISOString(),\n          editId: editData.editId,\n          enhanced: true,\n          formatResult,\n          memoryUpdate,\n          neuralTraining,\n        },\n        { namespace: 'coordination' },\n      );\n    }\n\n    const historyKey = `file-history:${file.replace(/\\//g, '_')}:${Date.now()}`;\n    await store.store(\n      historyKey,\n      {\n        file,\n        editId: editData.editId,\n        timestamp: new Date().toISOString(),\n        enhanced: true,\n        features: {\n          format,\n          updateMemory,\n          trainNeural,\n        },\n      },\n      { namespace: 'file-history' },\n    );\n\n    console.log(`  ðŸ’¾ Post-edit data saved to .swarm/memory.db`);\n    printSuccess(`âœ… Post-edit hook completed`);\n  } catch (err) {\n    printError(`Post-edit hook failed: ${err.message}`);\n  }\n}\n\nasync function postBashCommand(subArgs, flags) {\n  const options = flags;\n  const command = options.command || subArgs.slice(1).join(' ');\n  const exitCode = options['exit-code'] || '0';\n  const output = options.output || '';\n  const trackMetrics = options['track-metrics'] || false;\n  const storeResults = options['store-results'] || false;\n  const duration = options.duration || 0;\n\n  console.log(`ðŸ”§ Executing post-bash hook...`);\n  console.log(`ðŸ“œ Command: ${command}`);\n  console.log(`ðŸ“Š Exit code: ${exitCode}`);\n  if (trackMetrics) console.log(`ðŸ“Š Metrics tracking: ENABLED`);\n  if (storeResults) console.log(`ðŸ’¾ Results storage: ENABLED`);\n\n  try {\n    const store = await getMemoryStore();\n    const startTime = Date.now();\n\n    // Calculate performance metrics if enabled\n    let metrics = null;\n    if (trackMetrics) {\n      const commandLength = command.length;\n      const outputLength = output.length;\n      const success = parseInt(exitCode) === 0;\n\n      metrics = {\n        commandLength,\n        outputLength,\n        success,\n        duration: parseInt(duration) || 0,\n        exitCode: parseInt(exitCode),\n        timestamp: new Date().toISOString(),\n        complexity: commandLength > 100 ? 'high' : commandLength > 50 ? 'medium' : 'low',\n      };\n\n      console.log(\n        `  ðŸ“Š Command metrics: ${commandLength} chars, ${outputLength} output, ${success ? 'SUCCESS' : 'FAILED'}`,\n      );\n    }\n\n    const bashData = {\n      command,\n      exitCode,\n      output: storeResults ? output.substring(0, 5000) : output.substring(0, 1000), // Store more if requested\n      timestamp: new Date().toISOString(),\n      bashId: generateId('bash'),\n      trackMetrics,\n      storeResults,\n      metrics,\n    };\n\n    await store.store(`bash:${bashData.bashId}:post`, bashData, {\n      namespace: 'hooks:post-bash',\n      metadata: { hookType: 'post-bash', command, exitCode, success: parseInt(exitCode) === 0 },\n    });\n\n    // Store detailed results if enabled\n    if (storeResults) {\n      await store.store(\n        `command-results:${bashData.bashId}`,\n        {\n          command,\n          exitCode,\n          output,\n          timestamp: new Date().toISOString(),\n          fullOutput: true,\n        },\n        { namespace: 'command-results' },\n      );\n\n      console.log(`  ðŸ’¾ Full command results stored`);\n    }\n\n    // Store metrics if enabled\n    if (trackMetrics && metrics) {\n      await store.store(`command-metrics:${bashData.bashId}`, metrics, {\n        namespace: 'performance-metrics',\n      });\n\n      // Update running metrics\n      const existingMetrics = (await store.retrieve('command-metrics-summary', {\n        namespace: 'performance-metrics',\n      })) || { totalCommands: 0, successRate: 0, avgDuration: 0 };\n\n      existingMetrics.totalCommands += 1;\n      existingMetrics.successRate =\n        (existingMetrics.successRate * (existingMetrics.totalCommands - 1) +\n          (metrics.success ? 1 : 0)) /\n        existingMetrics.totalCommands;\n      existingMetrics.avgDuration =\n        (existingMetrics.avgDuration * (existingMetrics.totalCommands - 1) + metrics.duration) /\n        existingMetrics.totalCommands;\n      existingMetrics.lastUpdated = new Date().toISOString();\n\n      await store.store('command-metrics-summary', existingMetrics, {\n        namespace: 'performance-metrics',\n      });\n    }\n\n    // Update command history\n    await store.store(\n      `command-history:${Date.now()}`,\n      {\n        command,\n        exitCode,\n        timestamp: new Date().toISOString(),\n        success: parseInt(exitCode) === 0,\n        hasMetrics: trackMetrics,\n        hasResults: storeResults,\n      },\n      { namespace: 'command-history' },\n    );\n\n    console.log(`  ðŸ’¾ Command execution logged to .swarm/memory.db`);\n    printSuccess(`âœ… Post-bash hook completed`);\n  } catch (err) {\n    printError(`Post-bash hook failed: ${err.message}`);\n  }\n}\n\nasync function postSearchCommand(subArgs, flags) {\n  const options = flags;\n  const query = options.query || subArgs.slice(1).join(' ');\n  const resultCount = options['result-count'] || '0';\n  const searchType = options.type || 'general';\n\n  console.log(`ðŸ” Executing post-search hook...`);\n  console.log(`ðŸ”Ž Query: ${query}`);\n  console.log(`ðŸ“Š Results: ${resultCount}`);\n\n  try {\n    const store = await getMemoryStore();\n    const searchData = {\n      query,\n      resultCount: parseInt(resultCount),\n      searchType,\n      timestamp: new Date().toISOString(),\n      searchId: generateId('search'),\n    };\n\n    await store.store(`search:${searchData.searchId}`, searchData, {\n      namespace: 'hooks:post-search',\n      metadata: { hookType: 'post-search', query },\n    });\n\n    // Cache search for future use\n    await store.store(\n      `search-cache:${query}`,\n      {\n        resultCount: searchData.resultCount,\n        cachedAt: new Date().toISOString(),\n      },\n      { namespace: 'search-cache', ttl: 3600 },\n    ); // 1 hour TTL\n\n    console.log(`  ðŸ’¾ Search results cached to .swarm/memory.db`);\n    printSuccess(`âœ… Post-search hook completed`);\n  } catch (err) {\n    printError(`Post-search hook failed: ${err.message}`);\n  }\n}\n\n// ===== MCP INTEGRATION HOOKS =====\n\nasync function mcpInitializedCommand(subArgs, flags) {\n  const options = flags;\n  const serverName = options.server || 'claude-flow';\n  const sessionId = options['session-id'] || generateId('mcp-session');\n\n  console.log(`ðŸ”Œ Executing mcp-initialized hook...`);\n  console.log(`ðŸ’» Server: ${serverName}`);\n  console.log(`ðŸ†” Session: ${sessionId}`);\n\n  try {\n    const store = await getMemoryStore();\n    const mcpData = {\n      serverName,\n      sessionId,\n      initializedAt: new Date().toISOString(),\n      status: 'active',\n    };\n\n    await store.store(`mcp:${sessionId}`, mcpData, {\n      namespace: 'hooks:mcp-initialized',\n      metadata: { hookType: 'mcp-initialized', server: serverName },\n    });\n\n    console.log(`  ðŸ’¾ MCP session saved to .swarm/memory.db`);\n    printSuccess(`âœ… MCP initialized hook completed`);\n  } catch (err) {\n    printError(`MCP initialized hook failed: ${err.message}`);\n  }\n}\n\nasync function agentSpawnedCommand(subArgs, flags) {\n  const options = flags;\n  const agentType = options.type || 'generic';\n  const agentName = options.name || generateId('agent');\n  const swarmId = options['swarm-id'] || 'default';\n\n  console.log(`ðŸ¤– Executing agent-spawned hook...`);\n  console.log(`ðŸ“› Agent: ${agentName}`);\n  console.log(`ðŸ·ï¸  Type: ${agentType}`);\n\n  try {\n    const store = await getMemoryStore();\n    const agentData = {\n      agentName,\n      agentType,\n      swarmId,\n      spawnedAt: new Date().toISOString(),\n      status: 'active',\n    };\n\n    await store.store(`agent:${agentName}`, agentData, {\n      namespace: 'hooks:agent-spawned',\n      metadata: { hookType: 'agent-spawned', type: agentType },\n    });\n\n    // Update agent roster\n    await store.store(\n      `agent-roster:${Date.now()}`,\n      {\n        agentName,\n        action: 'spawned',\n        timestamp: new Date().toISOString(),\n      },\n      { namespace: 'agent-roster' },\n    );\n\n    console.log(`  ðŸ’¾ Agent registered to .swarm/memory.db`);\n    printSuccess(`âœ… Agent spawned hook completed`);\n  } catch (err) {\n    printError(`Agent spawned hook failed: ${err.message}`);\n  }\n}\n\nasync function taskOrchestratedCommand(subArgs, flags) {\n  const options = flags;\n  const taskId = options['task-id'] || generateId('orchestrated-task');\n  const strategy = options.strategy || 'balanced';\n  const priority = options.priority || 'medium';\n\n  console.log(`ðŸŽ­ Executing task-orchestrated hook...`);\n  console.log(`ðŸ†” Task: ${taskId}`);\n  console.log(`ðŸ“Š Strategy: ${strategy}`);\n\n  try {\n    const store = await getMemoryStore();\n    const orchestrationData = {\n      taskId,\n      strategy,\n      priority,\n      orchestratedAt: new Date().toISOString(),\n      status: 'orchestrated',\n    };\n\n    await store.store(`orchestration:${taskId}`, orchestrationData, {\n      namespace: 'hooks:task-orchestrated',\n      metadata: { hookType: 'task-orchestrated', strategy },\n    });\n\n    console.log(`  ðŸ’¾ Orchestration saved to .swarm/memory.db`);\n    printSuccess(`âœ… Task orchestrated hook completed`);\n  } catch (err) {\n    printError(`Task orchestrated hook failed: ${err.message}`);\n  }\n}\n\nasync function neuralTrainedCommand(subArgs, flags) {\n  const options = flags;\n  const modelName = options.model || 'default-neural';\n  const accuracy = options.accuracy || '0.0';\n  const patterns = options.patterns || '0';\n\n  console.log(`ðŸ§  Executing neural-trained hook...`);\n  console.log(`ðŸ¤– Model: ${modelName}`);\n  console.log(`ðŸ“Š Accuracy: ${accuracy}%`);\n\n  try {\n    const store = await getMemoryStore();\n    const trainingData = {\n      modelName,\n      accuracy: parseFloat(accuracy),\n      patternsLearned: parseInt(patterns),\n      trainedAt: new Date().toISOString(),\n    };\n\n    await store.store(`neural:${modelName}:${Date.now()}`, trainingData, {\n      namespace: 'hooks:neural-trained',\n      metadata: { hookType: 'neural-trained', model: modelName },\n    });\n\n    console.log(`  ðŸ’¾ Training results saved to .swarm/memory.db`);\n    printSuccess(`âœ… Neural trained hook completed`);\n  } catch (err) {\n    printError(`Neural trained hook failed: ${err.message}`);\n  }\n}\n\n// ===== SESSION HOOKS =====\n\nasync function sessionEndCommand(subArgs, flags) {\n  const options = flags;\n  const generateSummary = options['generate-summary'] !== 'false';\n  const persistState = options['persist-state'] !== 'false';\n  const exportMetrics = options['export-metrics'] || false;\n\n  console.log(`ðŸ”š Executing session-end hook...`);\n  if (generateSummary) console.log(`ðŸ“Š Summary generation: ENABLED`);\n  if (persistState) console.log(`ðŸ’¾ State persistence: ENABLED`);\n  if (exportMetrics) console.log(`ðŸ“ˆ Metrics export: ENABLED`);\n\n  try {\n    const store = await getMemoryStore();\n    const tasks = await store.list({ namespace: 'task-index', limit: 1000 });\n    const edits = await store.list({ namespace: 'file-history', limit: 1000 });\n    const commands = await store.list({ namespace: 'command-history', limit: 1000 });\n    const agents = await store.list({ namespace: 'agent-roster', limit: 1000 });\n\n    // Calculate session metrics\n    let metrics = null;\n    if (exportMetrics) {\n      const now = new Date();\n      const sessionStart = Math.min(\n        ...tasks.map((t) => new Date(t.value.timestamp || now).getTime()),\n        ...edits.map((e) => new Date(e.value.timestamp || now).getTime()),\n        ...commands.map((c) => new Date(c.value.timestamp || now).getTime()),\n      );\n\n      const duration = now.getTime() - sessionStart;\n      const successfulCommands = commands.filter((c) => c.value.success !== false).length;\n      const commandSuccessRate = commands.length > 0 ? successfulCommands / commands.length : 1;\n\n      metrics = {\n        sessionDuration: duration,\n        sessionDurationHuman: `${Math.round(duration / 1000 / 60)} minutes`,\n        totalTasks: tasks.length,\n        totalEdits: edits.length,\n        totalCommands: commands.length,\n        uniqueAgents: agents.length,\n        commandSuccessRate: Math.round(commandSuccessRate * 100),\n        avgTasksPerMinute: Math.round((tasks.length / (duration / 1000 / 60)) * 100) / 100,\n        avgEditsPerMinute: Math.round((edits.length / (duration / 1000 / 60)) * 100) / 100,\n        timestamp: now.toISOString(),\n      };\n    }\n\n    const sessionData = {\n      endedAt: new Date().toISOString(),\n      totalTasks: tasks.length,\n      totalEdits: edits.length,\n      totalCommands: commands.length,\n      uniqueAgents: agents.length,\n      sessionId: generateId('session'),\n      generateSummary,\n      persistState,\n      exportMetrics,\n      metrics,\n    };\n\n    await store.store(`session:${sessionData.sessionId}`, sessionData, {\n      namespace: 'sessions',\n      metadata: { hookType: 'session-end' },\n    });\n\n    // Persist detailed state if requested\n    if (persistState) {\n      const detailedState = {\n        sessionId: sessionData.sessionId,\n        tasks: tasks.slice(0, 100), // Limit to prevent memory issues\n        edits: edits.slice(0, 100),\n        commands: commands.slice(0, 100),\n        agents: agents.slice(0, 50),\n        persistedAt: new Date().toISOString(),\n        fullState: true,\n      };\n\n      await store.store(`session-state:${sessionData.sessionId}`, detailedState, {\n        namespace: 'session-states',\n        metadata: { type: 'full-state', sessionId: sessionData.sessionId },\n      });\n\n      console.log(`  ðŸ’¾ Full session state persisted`);\n    }\n\n    // Export metrics if requested\n    if (exportMetrics && metrics) {\n      await store.store(`session-metrics:${sessionData.sessionId}`, metrics, {\n        namespace: 'session-metrics',\n        metadata: { type: 'performance-metrics', sessionId: sessionData.sessionId },\n      });\n\n      console.log(`  ðŸ“ˆ Session metrics exported`);\n    }\n\n    if (generateSummary) {\n      console.log(`\\nðŸ“Š SESSION SUMMARY:`);\n      console.log(`  ðŸ“‹ Tasks: ${sessionData.totalTasks}`);\n      console.log(`  âœï¸  Edits: ${sessionData.totalEdits}`);\n      console.log(`  ðŸ”§ Commands: ${sessionData.totalCommands}`);\n      console.log(`  ðŸ¤– Agents: ${sessionData.uniqueAgents}`);\n\n      if (metrics) {\n        console.log(`  â±ï¸  Duration: ${metrics.sessionDurationHuman}`);\n        console.log(`  ðŸ“ˆ Success Rate: ${metrics.commandSuccessRate}%`);\n        console.log(`  ðŸƒ Tasks/min: ${metrics.avgTasksPerMinute}`);\n        console.log(`  âœï¸  Edits/min: ${metrics.avgEditsPerMinute}`);\n      }\n    }\n\n    console.log(`  ðŸ’¾ Session saved to .swarm/memory.db`);\n\n    if (memoryStore) {\n      memoryStore.close();\n      memoryStore = null;\n    }\n\n    printSuccess(`âœ… Session-end hook completed`);\n  } catch (err) {\n    printError(`Session-end hook failed: ${err.message}`);\n  }\n}\n\nasync function sessionRestoreCommand(subArgs, flags) {\n  const options = flags;\n  const sessionId = options['session-id'] || 'latest';\n\n  console.log(`ðŸ”„ Executing session-restore hook...`);\n  console.log(`ðŸ†” Session: ${sessionId}`);\n\n  try {\n    const store = await getMemoryStore();\n\n    // Find session to restore\n    let sessionData;\n    if (sessionId === 'latest') {\n      const sessions = await store.list({ namespace: 'sessions', limit: 1 });\n      sessionData = sessions[0]?.value;\n    } else {\n      sessionData = await store.retrieve(`session:${sessionId}`, { namespace: 'sessions' });\n    }\n\n    if (sessionData) {\n      console.log(`\\nðŸ“Š RESTORED SESSION:`);\n      console.log(`  ðŸ†” ID: ${sessionData.sessionId || 'unknown'}`);\n      console.log(`  ðŸ“‹ Tasks: ${sessionData.totalTasks || 0}`);\n      console.log(`  âœï¸  Edits: ${sessionData.totalEdits || 0}`);\n      console.log(`  â° Ended: ${sessionData.endedAt || 'unknown'}`);\n\n      // Store restoration event\n      await store.store(\n        `session-restore:${Date.now()}`,\n        {\n          restoredSessionId: sessionData.sessionId || sessionId,\n          restoredAt: new Date().toISOString(),\n        },\n        { namespace: 'session-events' },\n      );\n\n      console.log(`  ðŸ’¾ Session restored from .swarm/memory.db`);\n      printSuccess(`âœ… Session restore completed`);\n    } else {\n      printWarning(`No session found with ID: ${sessionId}`);\n    }\n  } catch (err) {\n    printError(`Session restore hook failed: ${err.message}`);\n  }\n}\n\nasync function notifyCommand(subArgs, flags) {\n  const options = flags;\n  const message = options.message || subArgs.slice(1).join(' ');\n  const level = options.level || 'info';\n  const swarmStatus = options['swarm-status'] || 'active';\n\n  console.log(`ðŸ“¢ Executing notify hook...`);\n  console.log(`ðŸ’¬ Message: ${message}`);\n  console.log(`ðŸ“Š Level: ${level}`);\n\n  try {\n    const store = await getMemoryStore();\n    const notificationData = {\n      message,\n      level,\n      swarmStatus,\n      timestamp: new Date().toISOString(),\n      notifyId: generateId('notify'),\n    };\n\n    await store.store(`notification:${notificationData.notifyId}`, notificationData, {\n      namespace: 'hooks:notify',\n      metadata: { hookType: 'notify', level },\n    });\n\n    // Display notification\n    const icon = level === 'error' ? 'âŒ' : level === 'warning' ? 'âš ï¸' : 'âœ…';\n    console.log(`\\n${icon} NOTIFICATION:`);\n    console.log(`  ${message}`);\n    console.log(`  ðŸ Swarm: ${swarmStatus}`);\n\n    console.log(`\\n  ðŸ’¾ Notification saved to .swarm/memory.db`);\n    printSuccess(`âœ… Notify hook completed`);\n  } catch (err) {\n    printError(`Notify hook failed: ${err.message}`);\n  }\n}\n\n// ===== PRETOOLUSE MODIFICATION HOOKS (v2.0.10+) =====\n\nasync function modifyBashCommand(subArgs, flags) {\n  // Check if stdin has data\n  if (process.stdin.isTTY) {\n    console.log('Usage: echo \\'{\"tool_input\":{\"command\":\"your command\"}}\\' | claude-flow hooks modify-bash');\n    console.log('\\nThis hook reads JSON from stdin and outputs modified JSON.');\n    console.log('It is designed for use with Claude Code v2.0.10+ PreToolUse feature.');\n    console.log('\\nExample:');\n    console.log('  echo \\'{\"tool_input\":{\"command\":\"rm test.txt\"}}\\' | claude-flow hooks modify-bash');\n    return;\n  }\n\n  // Read JSON from stdin\n  let input = '';\n  for await (const chunk of process.stdin) {\n    input += chunk;\n  }\n\n  if (!input.trim()) {\n    return; // Silently exit if no input\n  }\n\n  const toolInput = JSON.parse(input);\n  const command = toolInput.tool_input?.command || '';\n\n  if (!command) {\n    console.log(input); // Pass through if no command\n    return;\n  }\n\n  let modifiedCommand = command;\n  const notes = [];\n\n  // 1. Safety: Add -i flag to rm commands\n  if (/^rm\\s/.test(command) && !/-[iI]/.test(command)) {\n    modifiedCommand = command.replace(/^rm /, 'rm -i ');\n    notes.push('[Safety: Added -i flag for interactive confirmation]');\n  }\n\n  // 2. Aliases\n  if (/^ll(\\s|$)/.test(command)) {\n    modifiedCommand = command.replace(/^ll/, 'ls -lah');\n    notes.push('[Alias: ll â†’ ls -lah]');\n  } else if (/^la(\\s|$)/.test(command)) {\n    modifiedCommand = command.replace(/^la/, 'ls -la');\n    notes.push('[Alias: la â†’ ls -la]');\n  }\n\n  // 3. Path correction: Redirect test files to /tmp\n  if (/>\\s*test.*\\.(txt|log|tmp|json|md)/.test(command) && !/\\/tmp\\//.test(command)) {\n    modifiedCommand = command.replace(/>\\s*(test[^/]*\\.(txt|log|tmp|json|md))/, '> /tmp/$1');\n    notes.push('[Path: Redirected test file to /tmp/]');\n  }\n\n  // 4. Secret detection\n  if (/(password|secret|token|api[-_]?key|auth)/i.test(command) && !/#\\s*SECRETS_OK/.test(command)) {\n    notes.push('[Security: Command contains sensitive keywords. Add \"# SECRETS_OK\" to bypass]');\n  }\n\n  // Output modified JSON\n  const output = {\n    ...toolInput,\n    tool_input: {\n      ...toolInput.tool_input,\n      command: modifiedCommand,\n    },\n  };\n\n  if (notes.length > 0) {\n    output.modification_notes = notes.join(' ');\n  }\n\n  console.log(JSON.stringify(output, null, 2));\n}\n\nasync function modifyFileCommand(subArgs, flags) {\n  // Check if stdin has data\n  if (process.stdin.isTTY) {\n    console.log('Usage: echo \\'{\"tool_input\":{\"file_path\":\"your/file.js\"}}\\' | claude-flow hooks modify-file');\n    console.log('\\nThis hook reads JSON from stdin and outputs modified JSON.');\n    console.log('It is designed for use with Claude Code v2.0.10+ PreToolUse feature.');\n    console.log('\\nExample:');\n    console.log('  echo \\'{\"tool_input\":{\"file_path\":\"test.js\"}}\\' | claude-flow hooks modify-file');\n    return;\n  }\n\n  // Read JSON from stdin\n  let input = '';\n  for await (const chunk of process.stdin) {\n    input += chunk;\n  }\n\n  if (!input.trim()) {\n    return; // Silently exit if no input\n  }\n\n  const toolInput = JSON.parse(input);\n  const filePath = toolInput.tool_input?.file_path || toolInput.tool_input?.path || '';\n\n  if (!filePath) {\n    console.log(input); // Pass through if no file path\n    return;\n  }\n\n  let modifiedPath = filePath;\n  let shouldModify = false;\n  const notes = [];\n\n  // 1. Root folder protection\n  const isRootFile = /^[^/]*\\.(js|ts|jsx|tsx|py|java|go|rs|cpp|c|h)$/.test(filePath) ||\n                     /^test.*\\.(txt|log|tmp|json|md)$/.test(filePath) ||\n                     /^(temp|tmp|working)/.test(filePath);\n\n  if (isRootFile) {\n    if (/test.*\\.(test|spec)\\.|\\.test\\.|\\.spec\\./.test(filePath)) {\n      modifiedPath = `tests/${filePath}`;\n      shouldModify = true;\n      notes.push('[Organization: Moved test file to /tests/]');\n    } else if (/test.*\\.md|temp.*\\.md|working.*\\.md|scratch.*\\.md/.test(filePath)) {\n      modifiedPath = `docs/working/${filePath}`;\n      shouldModify = true;\n      notes.push('[Organization: Moved working document to /docs/working/]');\n    } else if (/\\.(js|ts|jsx|tsx|py)$/.test(filePath)) {\n      modifiedPath = `src/${filePath}`;\n      shouldModify = true;\n      notes.push('[Organization: Moved source file to /src/]');\n    } else if (/^(temp|tmp|scratch)/.test(filePath)) {\n      modifiedPath = `/tmp/${filePath}`;\n      shouldModify = true;\n      notes.push('[Organization: Redirected temporary file to /tmp/]');\n    }\n  }\n\n  // 2. Format hints\n  if (/\\.(ts|tsx|js|jsx)$/.test(modifiedPath)) {\n    notes.push('[Tip: Auto-format with Prettier/ESLint recommended]');\n  } else if (/\\.py$/.test(modifiedPath)) {\n    notes.push('[Tip: Auto-format with Black/autopep8 recommended]');\n  }\n\n  // Output modified JSON\n  const output = {\n    ...toolInput,\n    tool_input: {\n      ...toolInput.tool_input,\n    },\n  };\n\n  if (shouldModify) {\n    if (toolInput.tool_input.file_path) {\n      output.tool_input.file_path = modifiedPath;\n    } else {\n      output.tool_input.path = modifiedPath;\n    }\n  }\n\n  if (notes.length > 0) {\n    output.modification_notes = notes.join(' ');\n  }\n\n  console.log(JSON.stringify(output, null, 2));\n}\n\nasync function modifyGitCommitCommand(subArgs, flags) {\n  // Check if stdin has data\n  if (process.stdin.isTTY) {\n    console.log('Usage: echo \\'{\"tool_input\":{\"command\":\"git commit -m \\\\\"message\\\\\"\"}}\\'  | claude-flow hooks modify-git-commit');\n    console.log('\\nThis hook reads JSON from stdin and outputs modified JSON.');\n    console.log('It is designed for use with Claude Code v2.0.10+ PreToolUse feature.');\n    console.log('\\nExample:');\n    console.log('  echo \\'{\"tool_input\":{\"command\":\"git commit -m \\\\\"fix bug\\\\\"\"}}\\'  | claude-flow hooks modify-git-commit');\n    return;\n  }\n\n  // Read JSON from stdin\n  let input = '';\n  for await (const chunk of process.stdin) {\n    input += chunk;\n  }\n\n  if (!input.trim()) {\n    return; // Silently exit if no input\n  }\n\n  const toolInput = JSON.parse(input);\n  const command = toolInput.tool_input?.command || '';\n\n  if (!command || !/git commit/.test(command)) {\n    console.log(input); // Pass through if not git commit\n    return;\n  }\n\n  // Extract commit message\n  const msgMatch = command.match(/-m\\s+[\"']([^\"']+)[\"']/) || command.match(/-m\\s+(\\S+)/);\n  const commitMsg = msgMatch ? msgMatch[1] : '';\n\n  if (!commitMsg || /^\\[(feat|fix|docs|style|refactor|test|chore|perf)\\]/.test(commitMsg)) {\n    console.log(input); // Already formatted or no message\n    return;\n  }\n\n  const notes = [];\n\n  // Get current branch\n  let branch = 'main';\n  let ticket = '';\n  try {\n    const { execSync } = await import('child_process');\n    branch = execSync('git rev-parse --abbrev-ref HEAD', { encoding: 'utf8' }).trim();\n\n    // Extract JIRA ticket\n    const ticketMatch = branch.match(/[A-Z]+-[0-9]+/);\n    if (ticketMatch) {\n      ticket = ticketMatch[0];\n    }\n  } catch {\n    // Git not available, continue\n  }\n\n  // Detect conventional commit type\n  let type = 'chore';\n  if (/^(add|implement|create|new)/i.test(commitMsg)) type = 'feat';\n  else if (/^(fix|resolve|patch|correct)/i.test(commitMsg)) type = 'fix';\n  else if (/^(update|modify|change|improve)/i.test(commitMsg)) type = 'refactor';\n  else if (/^(doc|documentation|readme)/i.test(commitMsg)) type = 'docs';\n  else if (/^(test|testing|spec)/i.test(commitMsg)) type = 'test';\n  else if (/^(style|format|lint)/i.test(commitMsg)) type = 'style';\n  else if (/^(perf|optimize|speed)/i.test(commitMsg)) type = 'perf';\n\n  // Format message\n  let formattedMsg = ticket\n    ? `[${type}] ${commitMsg} (${ticket})`\n    : `[${type}] ${commitMsg}`;\n\n  // Add co-author\n  if (!/Co-Authored-By/.test(command)) {\n    formattedMsg += `\\n\\nðŸ¤– Generated with Claude Flow\\nCo-Authored-By: claude-flow <noreply@ruv.io>`;\n  }\n\n  // Replace message in command\n  const modifiedCommand = command.replace(\n    /-m\\s+[\"'][^\"']+[\"']|-m\\s+\\S+/,\n    `-m \"$(cat <<'EOF'\\n${formattedMsg}\\nEOF\\n)\"`\n  );\n\n  notes.push(`[Auto-formatted: ${type} type${ticket ? ` + ${ticket}` : ''}]`);\n\n  // Output modified JSON\n  const output = {\n    ...toolInput,\n    tool_input: {\n      ...toolInput.tool_input,\n      command: modifiedCommand,\n    },\n    modification_notes: notes.join(' '),\n  };\n\n  console.log(JSON.stringify(output, null, 2));\n}\n\nfunction showHooksHelp() {\n  console.log('Claude Flow Hooks (with .swarm/memory.db persistence):\\n');\n\n  console.log('Pre-Operation Hooks:');\n  console.log('  pre-task        Execute before starting a task');\n  console.log('  pre-edit        Validate before file modifications');\n  console.log('                  --auto-assign-agents  Auto-assign agents based on file type');\n  console.log('                  --load-context        Load file context');\n  console.log('  pre-bash        Check command safety (alias: pre-command)');\n  console.log('  pre-command     Same as pre-bash');\n  console.log('                  --validate-safety     Enable safety validation');\n  console.log('                  --prepare-resources   Prepare execution resources');\n\n  console.log('\\nPost-Operation Hooks:');\n  console.log('  post-task       Execute after completing a task');\n  console.log('  post-edit       Auto-format and log edits');\n  console.log('                  --format              Auto-format code');\n  console.log('                  --update-memory       Update agent memory');\n  console.log('                  --train-neural        Train neural patterns');\n  console.log('  post-bash       Log command execution (alias: post-command)');\n  console.log('  post-command    Same as post-bash');\n  console.log('                  --track-metrics       Track performance metrics');\n  console.log('                  --store-results       Store detailed results');\n  console.log('  post-search     Cache search results');\n\n  console.log('\\nMCP Integration Hooks:');\n  console.log('  mcp-initialized    Persist MCP configuration');\n  console.log('  agent-spawned      Update agent roster');\n  console.log('  task-orchestrated  Monitor task progress');\n  console.log('  neural-trained     Save pattern improvements');\n\n  console.log('\\nSession Hooks:');\n  console.log('  session-end        Generate summary and save state');\n  console.log('                     --generate-summary    Generate session summary');\n  console.log('                     --persist-state       Persist session state');\n  console.log('                     --export-metrics      Export performance metrics');\n  console.log('  session-restore    Load previous session state');\n  console.log('  notify             Custom notifications');\n\n  console.log('\\n===== NEW: PreToolUse Modification Hooks (v2.0.10+) =====');\n  console.log('  modify-bash        Modify Bash tool inputs (reads/writes JSON via stdin/stdout)');\n  console.log('                     â€¢ Safety: Adds -i flag to rm commands');\n  console.log('                     â€¢ Aliases: ll â†’ ls -lah, la â†’ ls -la');\n  console.log('                     â€¢ Path correction: Redirects test files to /tmp');\n  console.log('                     â€¢ Secret detection: Warns about sensitive keywords');\n  console.log('');\n  console.log('  modify-file        Modify Write/Edit tool inputs (reads/writes JSON via stdin/stdout)');\n  console.log('                     â€¢ Root folder protection: Moves files to appropriate directories');\n  console.log('                     â€¢ Organization: Tests â†’ /tests/, Sources â†’ /src/, Docs â†’ /docs/');\n  console.log('                     â€¢ Format hints: Suggests Prettier, Black, etc.');\n  console.log('');\n  console.log('  modify-git-commit  Modify git commit messages (reads/writes JSON via stdin/stdout)');\n  console.log('                     â€¢ Conventional commits: Auto-adds [feat], [fix], [docs], etc.');\n  console.log('                     â€¢ Ticket extraction: Extracts JIRA tickets from branch names');\n  console.log('                     â€¢ Co-author: Adds Claude Flow co-author footer');\n\n  console.log('\\nExamples:');\n  console.log('  hooks pre-command --command \"npm test\" --validate-safety true');\n  console.log('  hooks pre-edit --file \"src/app.js\" --auto-assign-agents true');\n  console.log('  hooks post-command --command \"build\" --track-metrics true');\n  console.log('  hooks post-edit --file \"src/app.js\" --format true --train-neural true');\n  console.log('  hooks session-end --generate-summary true --export-metrics true');\n  console.log('  hooks agent-spawned --name \"CodeReviewer\" --type \"reviewer\"');\n  console.log('  hooks notify --message \"Build completed\" --level \"success\"');\n  console.log('');\n  console.log('  # New modification hooks (stdin/stdout JSON):');\n  console.log('  echo \\'{\"tool_input\":{\"command\":\"rm test.txt\"}}\\' | hooks modify-bash');\n  console.log('  echo \\'{\"tool_input\":{\"file_path\":\"test.js\"}}\\' | hooks modify-file');\n  console.log('  echo \\'{\"tool_input\":{\"command\":\"git commit -m \\\\\"fix bug\\\\\"\"}}\\' | hooks modify-git-commit');\n\n  console.log('\\nCompatibility:');\n  console.log('  â€¢ pre-command and pre-bash are aliases');\n  console.log('  â€¢ post-command and post-bash are aliases');\n  console.log('  â€¢ Both --dash-case and camelCase parameters supported');\n  console.log('  â€¢ All parameters from settings.json template supported');\n  console.log('  â€¢ New modification hooks work with Claude Code v2.0.10+ PreToolUse feature');\n}\n\nexport default hooksAction;\n"],"names":["printSuccess","printError","printWarning","execRuvSwarmHook","checkRuvSwarmAvailable","SqliteMemoryStore","memoryStore","getMemoryStore","initialize","generateId","prefix","Date","now","Math","random","toString","substr","hooksAction","subArgs","flags","subcommand","options","help","h","showHooksHelp","preTaskCommand","preEditCommand","preBashCommand","postTaskCommand","postEditCommand","postBashCommand","postSearchCommand","mcpInitializedCommand","agentSpawnedCommand","taskOrchestratedCommand","neuralTrainedCommand","sessionEndCommand","sessionRestoreCommand","notifyCommand","modifyBashCommand","modifyFileCommand","modifyGitCommitCommand","err","message","description","taskId","agentId","autoSpawnAgents","console","log","store","taskData","status","startedAt","toISOString","namespace","metadata","hookType","timestamp","checkPromise","timeoutPromise","Promise","_","reject","setTimeout","Error","isAvailable","race","hookResult","success","output","close","process","exit","file","operation","autoAssignAgents","loadContext","assignedAgentType","recommendedAgent","path","ext","extname","toLowerCase","agentMapping","type","extension","recommended","contextData","fs","existsSync","stats","statSync","dirname","basename","fileExists","size","modified","mtime","directory","filename","isDirectory","willCreate","error","editData","editId","agentType","ttl","command","slice","join","workingDir","cwd","validateSafety","validate","prepareResources","safetyResult","dangerousCommands","isDangerous","length","some","dangerous","includes","mkdirSync","recursive","bashData","bashId","safety","validationEnabled","resourcesPrepped","toUpperCase","analyzePerformance","retrieve","completedData","completedAt","duration","getTime","metrics","durationHuman","toFixed","memoryKey","format","updateMemory","trainNeural","formatResult","formatters","formatter","attempted","reason","memoryUpdate","editContext","editedAt","formatted","fileSize","neuralTraining","editTime","patterns","fileType","fileName","confidence","enhanced","historyKey","replace","features","exitCode","trackMetrics","storeResults","startTime","commandLength","outputLength","parseInt","complexity","substring","fullOutput","existingMetrics","totalCommands","successRate","avgDuration","lastUpdated","hasMetrics","hasResults","query","resultCount","searchType","searchData","searchId","cachedAt","serverName","server","sessionId","mcpData","initializedAt","agentName","name","swarmId","agentData","spawnedAt","action","strategy","priority","orchestrationData","orchestratedAt","modelName","model","accuracy","trainingData","parseFloat","patternsLearned","trainedAt","generateSummary","persistState","exportMetrics","tasks","list","limit","edits","commands","agents","sessionStart","min","map","t","value","e","c","successfulCommands","filter","commandSuccessRate","sessionDuration","sessionDurationHuman","round","totalTasks","totalEdits","uniqueAgents","avgTasksPerMinute","avgEditsPerMinute","sessionData","endedAt","detailedState","persistedAt","fullState","sessions","restoredSessionId","restoredAt","level","swarmStatus","notificationData","notifyId","icon","stdin","isTTY","input","chunk","trim","toolInput","JSON","parse","tool_input","modifiedCommand","notes","test","push","modification_notes","stringify","filePath","file_path","modifiedPath","shouldModify","isRootFile","msgMatch","match","commitMsg","branch","ticket","execSync","encoding","ticketMatch","formattedMsg"],"mappings":"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"}