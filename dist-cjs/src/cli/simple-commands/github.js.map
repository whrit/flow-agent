{"version":3,"sources":["../../../../src/cli/simple-commands/github.js"],"sourcesContent":["#!/usr/bin/env node\n/**\n * GitHub command wrapper for simple CLI\n * Provides GitHub workflow automation capabilities\n */\n\nimport { printSuccess, printError, printWarning } from '../utils.js';\nimport { platform } from 'os';\nimport { access, constants } from 'fs/promises';\nimport { join } from 'path';\n\n/**\n * Cross-platform check for executable availability\n * @param {string} command - The command to check\n * @returns {Promise<boolean>} - True if command is available\n */\nasync function checkCommandAvailable(command) {\n  const { execSync } = await import('child_process');\n\n  if (platform() === 'win32') {\n    // Windows: Use 'where' command\n    try {\n      execSync(`where ${command}`, { stdio: 'ignore' });\n      return true;\n    } catch (e) {\n      return false;\n    }\n  } else {\n    // Unix-like systems: Check common paths and use 'command -v'\n    try {\n      execSync(`command -v ${command}`, { stdio: 'ignore', shell: true });\n      return true;\n    } catch (e) {\n      // Fallback: Check common installation paths\n      const commonPaths = [\n        '/usr/local/bin',\n        '/usr/bin',\n        '/opt/homebrew/bin',\n        join(process.env.HOME || '', '.local', 'bin'),\n        join(process.env.HOME || '', 'bin'),\n      ];\n\n      for (const dir of commonPaths) {\n        try {\n          await access(join(dir, command), constants.X_OK);\n          return true;\n        } catch (e) {\n          // Continue checking other paths\n        }\n      }\n      return false;\n    }\n  }\n}\n\n/**\n * Check if Claude CLI is available\n * @returns {Promise<boolean>} - True if Claude is available\n */\nasync function checkClaudeAvailable() {\n  return checkCommandAvailable('claude');\n}\n\nconst GITHUB_MODES = {\n  'init': {\n    description: 'Initialize GitHub-specific hooks and checkpoint system',\n    examples: [\n      'github init',\n      'github init --force',\n      'github init --checkpoints-only',\n    ],\n  },\n  'gh-coordinator': {\n    description: 'GitHub workflow orchestration and coordination',\n    examples: [\n      'github gh-coordinator \"setup CI/CD pipeline\"',\n      'github gh-coordinator \"coordinate release process\" --auto-approve',\n    ],\n  },\n  'pr-manager': {\n    description: 'Pull request management with multi-reviewer coordination',\n    examples: [\n      'github pr-manager \"create feature PR with automated testing\"',\n      'github pr-manager \"coordinate code review for security update\"',\n    ],\n  },\n  'issue-tracker': {\n    description: 'Issue management and project coordination',\n    examples: [\n      'github issue-tracker \"analyze project roadmap issues\"',\n      'github issue-tracker \"coordinate bug triage process\"',\n    ],\n  },\n  'release-manager': {\n    description: 'Release coordination and deployment pipelines',\n    examples: [\n      'github release-manager \"prepare v2.0.0 release\"',\n      'github release-manager \"coordinate hotfix deployment\"',\n    ],\n  },\n  'repo-architect': {\n    description: 'Repository structure optimization',\n    examples: [\n      'github repo-architect \"optimize repository structure\"',\n      'github repo-architect \"setup monorepo architecture\"',\n    ],\n  },\n  'sync-coordinator': {\n    description: 'Multi-package synchronization and version alignment',\n    examples: [\n      'github sync-coordinator \"sync package versions across repos\"',\n      'github sync-coordinator \"coordinate dependency updates\"',\n    ],\n  },\n};\n\nfunction showGitHubHelp() {\n  console.log(`\nüêô Claude Flow GitHub Workflow Automation\n\nUSAGE:\n  claude-flow github <mode> <objective> [options]\n\nGITHUB AUTOMATION MODES:\n`);\n\n  for (const [mode, info] of Object.entries(GITHUB_MODES)) {\n    console.log(`  ${mode.padEnd(18)} ${info.description}`);\n  }\n\n  console.log(`\nEXAMPLES:\n  claude-flow github pr-manager \"create feature PR with automated testing\"\n  claude-flow github gh-coordinator \"setup CI/CD pipeline\" --auto-approve\n  claude-flow github release-manager \"prepare v2.0.0 release\"\n  claude-flow github repo-architect \"optimize repository structure\"\n  claude-flow github issue-tracker \"analyze project roadmap issues\"\n  claude-flow github sync-coordinator \"sync package versions across repos\"\n\nOPTIONS:\n  --auto-approve             Auto-approve Claude permissions\n  --verbose                  Enable detailed logging\n  --dry-run                  Show what would be executed\n  --repo <name>              Target specific repository\n  --branch <name>            Target specific branch\n  --template <name>          Use specific workflow template\n\nADVANCED FEATURES:\n  ‚Ä¢ Multi-reviewer coordination with automated scheduling\n  ‚Ä¢ Intelligent issue categorization and assignment\n  ‚Ä¢ Automated testing integration and quality gates\n  ‚Ä¢ Release pipeline orchestration with rollback capabilities\n  ‚Ä¢ Repository structure analysis and optimization recommendations\n  ‚Ä¢ Cross-repository dependency management and synchronization\n\nFor complete documentation:\nhttps://github.com/ruvnet/claude-code-flow/docs/github.md\n`);\n}\n\nexport async function githubCommand(args, flags) {\n  if (!args || args.length === 0) {\n    showGitHubHelp();\n    return;\n  }\n\n  const mode = args[0];\n  \n  // Handle init mode separately\n  if (mode === 'init') {\n    const { githubInitCommand } = await import('./github/init.js');\n    return await githubInitCommand(flags);\n  }\n  \n  const objective = args.slice(1).join(' ').trim();\n\n  if (!objective) {\n    printError(`‚ùå Usage: github ${mode} <objective>`);\n\n    if (GITHUB_MODES[mode]) {\n      console.log(`\\nExamples for ${mode}:`);\n      for (const example of GITHUB_MODES[mode].examples) {\n        console.log(`  ${example}`);\n      }\n    } else {\n      console.log('\\nAvailable modes:');\n      for (const [modeName, info] of Object.entries(GITHUB_MODES)) {\n        console.log(`  ${modeName} - ${info.description}`);\n      }\n    }\n    return;\n  }\n\n  if (!GITHUB_MODES[mode]) {\n    printError(`‚ùå Unknown GitHub mode: ${mode}`);\n    console.log('\\nAvailable modes:');\n    for (const [modeName, info] of Object.entries(GITHUB_MODES)) {\n      console.log(`  ${modeName} - ${info.description}`);\n    }\n    return;\n  }\n\n  printSuccess(`üêô GitHub ${mode} mode activated`);\n  console.log(`üìã Objective: ${objective}`);\n\n  if (flags['dry-run']) {\n    console.log('\\nüéõÔ∏è  Configuration:');\n    console.log(`  Mode: ${mode}`);\n    console.log(`  Repository: ${flags.repo || 'current'}`);\n    console.log(`  Branch: ${flags.branch || 'current'}`);\n    console.log(`  Template: ${flags.template || 'default'}`);\n    console.log(`  Auto-approve: ${flags['auto-approve'] || false}`);\n    console.log(`  Verbose: ${flags.verbose || false}`);\n    console.log('\\n‚ö†Ô∏è  DRY RUN - GitHub workflow configuration preview');\n    return;\n  }\n\n  try {\n    // Check if Claude is available\n    const { execSync } = await import('child_process');\n\n    // Cross-platform check for Claude CLI\n    const isClaudeAvailable = await checkClaudeAvailable();\n    if (!isClaudeAvailable) {\n      printWarning('‚ö†Ô∏è  Claude CLI not found. GitHub automation requires Claude.');\n      console.log('Install Claude: https://claude.ai/code');\n      console.log('\\nAlternatively, this would execute:');\n      console.log(`1. Initialize ${mode} workflow for: ${objective}`);\n      console.log('2. Set up GitHub integration and permissions');\n      console.log('3. Configure automation rules and triggers');\n      console.log('4. Execute workflow with monitoring and reporting');\n      return;\n    }\n\n    // Build the prompt for Claude using GitHub workflow methodology\n    const githubPrompt = `Execute GitHub workflow automation using ${mode} mode:\n\nOBJECTIVE: ${objective}\n\nGITHUB MODE: ${mode}\nDESCRIPTION: ${GITHUB_MODES[mode].description}\n\nCONFIGURATION:\n- Repository: ${flags.repo || 'current directory repository'}\n- Branch: ${flags.branch || 'current branch'}\n- Template: ${flags.template || 'default workflow'}\n- Auto-approve: ${flags['auto-approve'] || false}\n- Verbose: ${flags.verbose || false}\n\nGITHUB WORKFLOW REQUIREMENTS:\n\n1. REPOSITORY ANALYSIS:\n   - Analyze current repository structure and configuration\n   - Check existing workflows, branches, and protection rules\n   - Identify integration points and dependencies\n   - Document current state and proposed changes\n\n2. WORKFLOW DESIGN:\n   - Design GitHub Actions workflows appropriate for the objective\n   - Create or update .github/workflows/ files\n   - Configure triggers, jobs, and steps\n   - Set up proper permissions and security measures\n\n3. INTEGRATION SETUP:\n   - Configure branch protection rules if needed\n   - Set up automated testing and quality gates\n   - Configure deployment pipelines if applicable\n   - Set up notifications and monitoring\n\n4. AUTOMATION IMPLEMENTATION:\n   - Create or update GitHub Actions YAML files\n   - Set up any required secrets and environment variables\n   - Configure automated issue and PR management\n   - Implement approval workflows and review assignments\n\n5. MONITORING & REPORTING:\n   - Set up workflow monitoring and status reporting\n   - Configure failure notifications and alerts\n   - Create documentation for the automation\n   - Set up metrics and analytics collection\n\nEXECUTION APPROACH:\n1. Analyze the current repository and GitHub configuration\n2. Design the appropriate workflow automation for the objective\n3. Create or update GitHub Actions and configuration files\n4. Test the workflow with proper validation\n5. Document the automation and provide usage instructions\n\nTARGET DIRECTORY:\nUse the current repository's .github/ directory for workflows and configuration.\n\nIMPORTANT:\n- Create actual, working GitHub Actions workflows - not templates\n- Include proper error handling and security measures\n- Add comprehensive documentation and usage instructions\n- Follow GitHub Actions best practices and conventions\n- Ensure workflows are production-ready and maintainable\n- Include proper testing and validation steps\n\nBegin execution now. Create all necessary GitHub workflow files and configuration.`;\n\n    console.log('üöÄ Launching GitHub automation via Claude...');\n\n    // Execute Claude with the GitHub prompt\n    const { spawn } = await import('child_process');\n\n    const claudeArgs = [];\n\n    // Add auto-permission flag if requested\n    if (flags['auto-approve'] || flags['dangerously-skip-permissions']) {\n      claudeArgs.push('--dangerously-skip-permissions');\n    }\n\n    // Spawn claude process\n    const claudeProcess = spawn('claude', claudeArgs, {\n      stdio: ['pipe', 'inherit', 'inherit'],\n      shell: false,\n    });\n\n    // Write the prompt to stdin and close it\n    claudeProcess.stdin.write(githubPrompt);\n    claudeProcess.stdin.end();\n\n    // Wait for the process to complete\n    await new Promise((resolve, reject) => {\n      claudeProcess.on('close', (code) => {\n        if (code === 0) {\n          printSuccess('‚úÖ GitHub automation completed successfully!');\n          resolve();\n        } else {\n          reject(new Error(`Claude process exited with code ${code}`));\n        }\n      });\n\n      claudeProcess.on('error', (err) => {\n        reject(err);\n      });\n    });\n  } catch (error) {\n    printError(`‚ùå GitHub automation failed: ${error.message}`);\n\n    // Fallback implementation details\n    console.log('\\nüìã Fallback execution plan:');\n    console.log(`1. ${mode} workflow would be configured for: ${objective}`);\n    console.log('2. GitHub Actions YAML files would be created');\n    console.log('3. Repository settings would be configured');\n    console.log('4. Automation rules would be established');\n    console.log('5. Monitoring and reporting would be set up');\n\n    printWarning('\\n‚ö†Ô∏è  Note: Full GitHub automation requires Claude CLI.');\n    console.log('Install Claude: https://claude.ai/code');\n  }\n}\n\n// Allow direct execution for testing\nif (import.meta.main) {\n  const args = [];\n  const flags = {};\n\n  // Parse arguments and flags from Deno.args if available\n  if (typeof Deno !== 'undefined' && Deno.args) {\n    for (let i = 0; i < Deno.args.length; i++) {\n      const arg = Deno.args[i];\n      if (arg.startsWith('--')) {\n        const flagName = arg.substring(2);\n        const nextArg = Deno.args[i + 1];\n\n        if (nextArg && !nextArg.startsWith('--')) {\n          flags[flagName] = nextArg;\n          i++; // Skip the next argument\n        } else {\n          flags[flagName] = true;\n        }\n      } else {\n        args.push(arg);\n      }\n    }\n  }\n\n  await githubCommand(args, flags);\n}\n"],"names":["printSuccess","printError","printWarning","platform","access","constants","join","checkCommandAvailable","command","execSync","stdio","e","shell","commonPaths","process","env","HOME","dir","X_OK","checkClaudeAvailable","GITHUB_MODES","description","examples","showGitHubHelp","console","log","mode","info","Object","entries","padEnd","githubCommand","args","flags","length","githubInitCommand","objective","slice","trim","example","modeName","repo","branch","template","verbose","isClaudeAvailable","githubPrompt","spawn","claudeArgs","push","claudeProcess","stdin","write","end","Promise","resolve","reject","on","code","Error","err","error","message","main","Deno","i","arg","startsWith","flagName","substring","nextArg"],"mappings":"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"}