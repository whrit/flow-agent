{"version":3,"sources":["../../../../src/cli/simple-commands/webui-validator.js"],"sourcesContent":["/**\n * WebUI Cross-Platform Validator\n * Validates that WebUI components work across Node.js and Deno\n */\n\nimport { compat } from '../runtime-detector.js';\nimport { promises as fs } from 'fs';\n\nexport class WebUIValidator {\n  constructor() {\n    this.tests = [];\n    this.results = {\n      passed: 0,\n      failed: 0,\n      total: 0,\n    };\n  }\n\n  async runValidation() {\n    console.log(`üîç WebUI Cross-Platform Validation (${compat.runtime})`);\n    console.log('‚îÄ'.repeat(50));\n\n    // Runtime Detection Test\n    this.test('Runtime Detection', () => {\n      const isValidRuntime = compat.runtime === 'node' || compat.runtime === 'deno';\n      const hasPlatform = compat.platform && compat.platform.os;\n      return isValidRuntime && hasPlatform;\n    });\n\n    // Terminal I/O Test\n    this.test('Terminal I/O Layer', () => {\n      const terminal = compat.terminal;\n      const hasRequiredMethods =\n        terminal &&\n        typeof terminal.write === 'function' &&\n        typeof terminal.read === 'function' &&\n        typeof terminal.exit === 'function';\n      return hasRequiredMethods;\n    });\n\n    // Component Import Test\n    await this.asyncTest('Component Imports', async () => {\n      try {\n        await import('./start-wrapper.js');\n        await import('./process-ui-enhanced.js');\n        return true;\n      } catch (err) {\n        return false;\n      }\n    });\n\n    // UI Instantiation Test\n    await this.asyncTest('UI Instantiation', async () => {\n      try {\n        const { EnhancedProcessUI } = await import('./process-ui-enhanced.js');\n        const ui = new EnhancedProcessUI();\n        return ui && ui.processes && ui.processes.size > 0;\n      } catch (err) {\n        return false;\n      }\n    });\n\n    // File Operations Test\n    await this.asyncTest('File Operations', async () => {\n      try {\n        await compat.safeCall(async () => {\n          if (compat.runtime === 'deno') {\n            await fs.writeFile('.webui-test', 'test', 'utf8');\n            await fs.unlink('.webui-test');\n          } else {\n            const fs = await import('fs/promises');\n            await fs.writeFile('.webui-test', 'test', 'utf8');\n            await fs.unlink('.webui-test');\n          }\n        });\n        return true;\n      } catch (err) {\n        return false;\n      }\n    });\n\n    this.printSummary();\n    return this.results.failed === 0;\n  }\n\n  test(name, testFn) {\n    this.results.total++;\n    try {\n      const result = testFn();\n      if (result) {\n        console.log(`‚úÖ ${name}`);\n        this.results.passed++;\n      } else {\n        console.log(`‚ùå ${name}`);\n        this.results.failed++;\n      }\n    } catch (err) {\n      console.log(`‚ùå ${name}: ${err.message}`);\n      this.results.failed++;\n    }\n  }\n\n  async asyncTest(name, testFn) {\n    this.results.total++;\n    try {\n      const result = await testFn();\n      if (result) {\n        console.log(`‚úÖ ${name}`);\n        this.results.passed++;\n      } else {\n        console.log(`‚ùå ${name}`);\n        this.results.failed++;\n      }\n    } catch (err) {\n      console.log(`‚ùå ${name}: ${err.message}`);\n      this.results.failed++;\n    }\n  }\n\n  printSummary() {\n    console.log('‚îÄ'.repeat(50));\n    console.log(`üìä Results: ${this.results.passed}/${this.results.total} passed`);\n    if (this.results.failed === 0) {\n      console.log('üéâ All validations passed! WebUI is cross-platform compatible.');\n    } else {\n      console.log(`‚ö†Ô∏è  ${this.results.failed} validation(s) failed.`);\n    }\n  }\n}\n\n// Auto-run if called directly\nif (import.meta.url === `file://${process.argv[1]}`) {\n  const validator = new WebUIValidator();\n  const success = await validator.runValidation();\n  process.exit(success ? 0 : 1);\n}\n"],"names":["compat","promises","fs","WebUIValidator","tests","results","passed","failed","total","runValidation","console","log","runtime","repeat","test","isValidRuntime","hasPlatform","platform","os","terminal","hasRequiredMethods","write","read","exit","asyncTest","err","EnhancedProcessUI","ui","processes","size","safeCall","writeFile","unlink","printSummary","name","testFn","result","message","url","process","argv","validator","success"],"mappings":"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"}